Index: app/src/main/java/com/example/apppetrobras/Activities/Passos.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.apppetrobras.Activities;\r\n\r\nimport android.app.Dialog;\r\nimport android.content.Context;\r\nimport android.content.SharedPreferences;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.text.TextUtils;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.time.LocalDate;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.Navigations.Drawer;\r\nimport com.example.Navigations.Tabs;\r\nimport com.example.apppetrobras.R;\r\nimport com.example.apppetrobras.Objects.PassosObj;\r\nimport com.example.apppetrobras.api.RetroFitClient;\r\nimport com.example.apppetrobras.databinding.LayoutPassosBinding;\r\n\r\n\r\nimport java.util.Date;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\nimport okhttp3.ResponseBody;\r\nimport retrofit2.Call;\r\nimport retrofit2.Callback;\r\nimport retrofit2.Response;\r\n\r\npublic class Passos extends Drawer {\r\n\r\n    // Declaração das variáveis\r\n\r\n    int idTitulo, idSolucao, idPasso, tipoProblema, qtdPassos;\r\n    String tituloSolucao, titulo, check, titulosProblemas;\r\n\r\n    Context context;\r\n\r\n    TextView numeroPasso, nomeSolucao, descSolucao;\r\n    ImageView imagemSolucao;\r\n\r\n    List<PassosObj> passosObjList;\r\n\r\n    Call<List<PassosObj>> call;\r\n\r\n    LayoutPassosBinding layoutPassosBinding;\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n\r\n        super.onCreate(savedInstanceState);\r\n        layoutPassosBinding = LayoutPassosBinding.inflate(getLayoutInflater());\r\n        setContentView(layoutPassosBinding.getRoot());\r\n        allocateActivityTitle(\"Menu Principal\");\r\n\r\n        // Criação de variáveis para se referenciar aos intens do layout\r\n        nomeSolucao = findViewById(R.id.nomeSolucao);\r\n        nomeSolucao.setSelected(true);\r\n        nomeSolucao.setEllipsize(TextUtils.TruncateAt.MARQUEE);\r\n        nomeSolucao.setSingleLine(true);\r\n        numeroPasso = findViewById(R.id.numeroPasso);\r\n        descSolucao = findViewById(R.id.descricaoPasso);\r\n        imagemSolucao = findViewById(R.id.imagemSolucao);\r\n\r\n        // Requisição dos dados passados durante o intent\r\n        tipoProblema = getIntent().getIntExtra(\"TIPO\", 1);\r\n        idTitulo = getIntent().getIntExtra(\"ID_TITULO\",1);\r\n        idSolucao = getIntent().getIntExtra(\"ID_SOLUCAO\",1);\r\n        tituloSolucao = getIntent().getStringExtra(\"TITULO_SOLUCAO\");\r\n        titulo = getIntent().getStringExtra(\"titulo\");\r\n        titulosProblemas = getIntent().getStringExtra(\"titulosProblemas\");\r\n\r\n\r\n\r\n        // Instanciação de variáveis chave\r\n        context = this;\r\n        idPasso = 1;\r\n        String concatenar = Integer.toString(idTitulo) + Integer.toString(idSolucao);\r\n        int numerojunto = Integer.parseInt(concatenar);\r\n\r\n        // Resgata o check\r\n\r\n        // Trata o check para o caso do usuário retornar às soluções inadequadamente\r\n        trataCheck(3);\r\n\r\n        switch (tipoProblema){\r\n            case 1:\r\n            default:\r\n                call = RetroFitClient\r\n                        .getInstance()\r\n                        .getAPI()\r\n                        .getTextoLentidao(numerojunto, idPasso);\r\n                break;\r\n            case 2:\r\n                call = RetroFitClient\r\n                        .getInstance()\r\n                        .getAPI()\r\n                        .getTextoInternet(numerojunto, idPasso);\r\n                break;\r\n            case 3:\r\n                call = RetroFitClient\r\n                        .getInstance()\r\n                        .getAPI()\r\n                        .getTextoEquipamento(numerojunto, idPasso);\r\n                break;\r\n            case 4:\r\n                call = RetroFitClient\r\n                        .getInstance()\r\n                        .getAPI()\r\n                        .getTextoOutros(numerojunto, idPasso);\r\n                break;\r\n        }\r\n\r\n        call.enqueue(new Callback<List<PassosObj>>() {\r\n            @Override\r\n            public void onResponse(Call<List<PassosObj>> call, Response<List<PassosObj>> response) {\r\n                if (!response.isSuccessful()){\r\n                    Toast.makeText(context, response.code(), Toast.LENGTH_SHORT).show();\r\n                    return;\r\n                }\r\n                passosObjList = response.body();\r\n                // Armazena o total de passos dessa solução\r\n                qtdPassos = passosObjList.size();\r\n                inserirNaTela();\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Call<List<PassosObj>> call, Throwable t) {\r\n                Toast.makeText(context, t.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    public void rtrnPasso(View view){\r\n        if (idPasso > 1) {\r\n            idPasso-=1;\r\n            inserirNaTela();\r\n        }\r\n    }\r\n\r\n    public void proxPasso(View view){\r\n        // verifica se há mais um passo então atualiza as informações na tela:\r\n        if (idPasso < qtdPassos) {\r\n            idPasso+=1;\r\n            inserirNaTela();\r\n            thereIsNoPasso();\r\n\r\n        }\r\n    }\r\n\r\n    //vendo que chegou no ultimo passo e revelando os botoes de conseguiu e nao conseguiu\r\n    public void thereIsNoPasso(){\r\n        if (idPasso == qtdPassos) {\r\n            ImageView right = findViewById(R.id.btnResolveu);\r\n            ImageView wrong = findViewById(R.id.btnNaoResolveu);\r\n\r\n            right.setVisibility(View.VISIBLE);\r\n            wrong.setVisibility(View.VISIBLE);\r\n        }\r\n    }\r\n    //função do botao de X\r\n    public void dontGetMeWrong(View view){\r\n        trataCheck(1);\r\n        mudarTela();\r\n    }\r\n\r\n    //função do botao de correto\r\n    public void dontGetMeRight(View view){\r\n        trataCheck(2);\r\n        finalizarSolucao();\r\n    }\r\n\r\n    //função do botao sem acesso\r\n    public void dontGetMeLost(View view){\r\n        trataCheck(3);\r\n        mudarTela();\r\n    }\r\n\r\n    public void inserirNaTela(){\r\n        // Inserção dos Valores na tela\r\n\r\n        nomeSolucao.setText(tituloSolucao);\r\n\r\n        numeroPasso.setText(\"Passo: \"+idPasso);\r\n\r\n        // idPasso começa em 0, preciso somar 1 a ele para se adequar ao BD\r\n        String descricaoBD = passosObjList.get(idPasso-1).getTexto();\r\n        descSolucao.setText(descricaoBD);\r\n\r\n        // idPasso começa em 0, preciso somar 1 a ele para se adequar ao BD\r\n//        String imagemBD = soluctionsList.get(idPasso-1).getUrl();\r\n        String imagemBD = \"\";\r\n        Glide.with(this)\r\n                .load(imagemBD)\r\n                .error(R.drawable.ic_error)\r\n                .into(imagemSolucao);\r\n    }\r\n\r\n\r\n    //função que guarda no bd o relatório\r\n    public void iAmWhoKnocks(){\r\n\r\n\r\n        SharedPreferences sharedPreferences = getSharedPreferences(\r\n                getString(R.string.preference_file_key), Context.MODE_PRIVATE);\r\n\r\n        String nome = sharedPreferences.getString(\"nome\", \"\");\r\n        String chave = sharedPreferences.getString(\"chave\", \"\");\r\n\r\n        Call<ResponseBody> call = RetroFitClient\r\n                .getInstance()\r\n                .getAPI().postRelatorio(nome, chave, getTodaysDate(), tipoProblema, titulo,idTitulo,tituloSolucao,check);\r\n\r\n        call.enqueue(new Callback<ResponseBody>() {\r\n            @Override\r\n            public void onResponse(Call<ResponseBody> call, Response<ResponseBody> response) {\r\n                    Toast.makeText(Passos.this, \"Relatorio criado\", Toast.LENGTH_LONG).show();\r\n\r\n            }\r\n\r\n\r\n            @Override\r\n            public void onFailure(Call<ResponseBody> call, Throwable t) {\r\n                Toast.makeText(Passos.this, t.getMessage(), Toast.LENGTH_LONG).show();\r\n\r\n            }\r\n        });\r\n\r\n        // Zera o check (Só pra garantir)\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putString(\"check\", \"\");\r\n        editor.apply();\r\n    }\r\n\r\n\r\n\r\n    public void trataCheck(int _estadoCheck){\r\n        // Resgata check\r\n        SharedPreferences sharedPreferences = getSharedPreferences(\r\n                getString(R.string.preference_file_key), Context.MODE_PRIVATE);\r\n        check = sharedPreferences.getString(\"check\",\"\");\r\n\r\n        String holder = \"\";\r\n\r\n        for (int i = 0; i < check.length(); i++){\r\n            if (i != idSolucao-1){\r\n                holder += check.charAt(i);\r\n            }\r\n            else{\r\n                holder += _estadoCheck;\r\n            }\r\n        }\r\n\r\n        check = holder;\r\n\r\n        // Atualização do check\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putString(\"check\", check);\r\n        editor.apply();\r\n    }\r\n\r\n    public void mudarTela(){\r\n        if (check.contains(\"0\")){\r\n            retornarParaSolucoes();\r\n        }\r\n        else {\r\n            finalizarSolucao();\r\n        }\r\n    }\r\n\r\n    private void finalizarSolucao() {\r\n        Dialog mdialog;\r\n        mdialog = new Dialog(this);\r\n        // Trata a checagem interna para ser enviada ao Banco de Dados (substitui o 3 por 0)\r\n        String holder = \"\";\r\n        for (int i = 0; i < check.length(); i++){\r\n            if (check.charAt(i) == '3'){\r\n                holder += \"0\";\r\n            }\r\n            else {\r\n                holder += check.charAt(i);\r\n            }\r\n        }\r\n        check = holder;\r\n\r\n        // Atualização do check\r\n        SharedPreferences sharedPreferences = getSharedPreferences(\r\n                getString(R.string.preference_file_key), Context.MODE_PRIVATE);\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putString(\"check\", check);\r\n        editor.apply();\r\n\r\n        // Adição de um relatório no Banco de Dados\r\n        iAmWhoKnocks();\r\n\r\n        // Redirecionamento para a tela de \"parabéns\"\r\n        mdialog.setContentView(R.layout.popupparabens);\r\n        mdialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n        mdialog.show();\r\n\r\n        //temporario:\r\n        new Handler().postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                Intent intent = new Intent(Passos.this, Relatorio.class);\r\n                startActivity(intent);\r\n                finish();\r\n            }\r\n        }, 3500);\r\n\r\n    }\r\n\r\n    public String getTodaysDate() {\r\n        return new SimpleDateFormat(\"dd/MM/yyyy\", Locale.getDefault()).format(new Date());\r\n    }\r\n\r\n\r\n    public void retornarParaSolucoes(){\r\n        // Redirecionamento para a tela do problema contendo os títulos das soluções\r\n        Intent intent = new Intent(Passos.this, Solucoes.class);\r\n\r\n        intent.putExtra(\"TIPO\",tipoProblema);\r\n        intent.putExtra(\"ID_TITULO\",idTitulo);\r\n        intent.putExtra(\"titulo\", titulo);\r\n        intent.putExtra(\"titulosProblemas\", titulosProblemas);\r\n\r\n        startActivity(intent);\r\n        finish();\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        mudarTela();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/apppetrobras/Activities/Passos.java b/app/src/main/java/com/example/apppetrobras/Activities/Passos.java
--- a/app/src/main/java/com/example/apppetrobras/Activities/Passos.java	(revision 0923599e0c49f64c390f0ac32408cee8ad385b64)
+++ b/app/src/main/java/com/example/apppetrobras/Activities/Passos.java	(date 1664976436712)
@@ -1,13 +1,9 @@
 package com.example.apppetrobras.Activities;
 
-import android.app.Dialog;
 import android.content.Context;
 import android.content.SharedPreferences;
 import android.content.Intent;
-import android.graphics.Color;
-import android.graphics.drawable.ColorDrawable;
 import android.os.Bundle;
-import android.os.Handler;
 import android.text.TextUtils;
 import android.view.View;
 import android.widget.ImageView;
@@ -17,9 +13,8 @@
 import java.text.SimpleDateFormat;
 import java.time.LocalDate;
 
-import com.bumptech.glide.Glide;
+//import com.bumptech.glide.Glide;
 import com.example.Navigations.Drawer;
-import com.example.Navigations.Tabs;
 import com.example.apppetrobras.R;
 import com.example.apppetrobras.Objects.PassosObj;
 import com.example.apppetrobras.api.RetroFitClient;
@@ -53,8 +48,6 @@
 
     LayoutPassosBinding layoutPassosBinding;
 
-
-
     @Override
     protected void onCreate(Bundle savedInstanceState) {
 
@@ -80,18 +73,13 @@
         titulo = getIntent().getStringExtra("titulo");
         titulosProblemas = getIntent().getStringExtra("titulosProblemas");
 
-
-
         // Instanciação de variáveis chave
         context = this;
         idPasso = 1;
         String concatenar = Integer.toString(idTitulo) + Integer.toString(idSolucao);
         int numerojunto = Integer.parseInt(concatenar);
 
-        // Resgata o check
 
-        // Trata o check para o caso do usuário retornar às soluções inadequadamente
-        trataCheck(3);
 
         switch (tipoProblema){
             case 1:
@@ -173,19 +161,27 @@
     //função do botao de X
     public void dontGetMeWrong(View view){
         trataCheck(1);
+        Toast.makeText(context, ""+check , Toast.LENGTH_SHORT).show();
         mudarTela();
+
     }
 
     //função do botao de correto
     public void dontGetMeRight(View view){
         trataCheck(2);
-        finalizarSolucao();
+        Toast.makeText(context, ""+check, Toast.LENGTH_SHORT).show();
+        mudarTela();
+
+        iAmWhoKnocks();
     }
 
     //função do botao sem acesso
     public void dontGetMeLost(View view){
         trataCheck(3);
+        Toast.makeText(context, ""+check, Toast.LENGTH_SHORT).show();
         mudarTela();
+
+
     }
 
     public void inserirNaTela(){
@@ -202,10 +198,10 @@
         // idPasso começa em 0, preciso somar 1 a ele para se adequar ao BD
 //        String imagemBD = soluctionsList.get(idPasso-1).getUrl();
         String imagemBD = "";
-        Glide.with(this)
-                .load(imagemBD)
-                .error(R.drawable.ic_error)
-                .into(imagemSolucao);
+        //Glide.with(this)
+                //.load(imagemBD)
+                //.error(R.drawable.ic_error)
+                //.into(imagemSolucao);
     }
 
 
@@ -237,21 +233,11 @@
 
             }
         });
-
-        // Zera o check (Só pra garantir)
-        SharedPreferences.Editor editor = sharedPreferences.edit();
-        editor.putString("check", "");
-        editor.apply();
     }
 
 
 
     public void trataCheck(int _estadoCheck){
-        // Resgata check
-        SharedPreferences sharedPreferences = getSharedPreferences(
-                getString(R.string.preference_file_key), Context.MODE_PRIVATE);
-        check = sharedPreferences.getString("check","");
-
         String holder = "";
 
         for (int i = 0; i < check.length(); i++){
@@ -264,11 +250,6 @@
         }
 
         check = holder;
-
-        // Atualização do check
-        SharedPreferences.Editor editor = sharedPreferences.edit();
-        editor.putString("check", check);
-        editor.apply();
     }
 
     public void mudarTela(){
@@ -281,8 +262,7 @@
     }
 
     private void finalizarSolucao() {
-        Dialog mdialog;
-        mdialog = new Dialog(this);
+
         // Trata a checagem interna para ser enviada ao Banco de Dados (substitui o 3 por 0)
         String holder = "";
         for (int i = 0; i < check.length(); i++){
@@ -293,32 +273,15 @@
                 holder += check.charAt(i);
             }
         }
-        check = holder;
-
-        // Atualização do check
-        SharedPreferences sharedPreferences = getSharedPreferences(
-                getString(R.string.preference_file_key), Context.MODE_PRIVATE);
-        SharedPreferences.Editor editor = sharedPreferences.edit();
-        editor.putString("check", check);
-        editor.apply();
 
         // Adição de um relatório no Banco de Dados
-        iAmWhoKnocks();
+
+
+
 
         // Redirecionamento para a tela de "parabéns"
-        mdialog.setContentView(R.layout.popupparabens);
-        mdialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
-        mdialog.show();
-
         //temporario:
-        new Handler().postDelayed(new Runnable() {
-            @Override
-            public void run() {
-                Intent intent = new Intent(Passos.this, Relatorio.class);
-                startActivity(intent);
-                finish();
-            }
-        }, 3500);
+        Intent intent = new Intent(Passos.this, Inicio.class);
 
     }
 
@@ -330,18 +293,6 @@
     public void retornarParaSolucoes(){
         // Redirecionamento para a tela do problema contendo os títulos das soluções
         Intent intent = new Intent(Passos.this, Solucoes.class);
-
-        intent.putExtra("TIPO",tipoProblema);
-        intent.putExtra("ID_TITULO",idTitulo);
-        intent.putExtra("titulo", titulo);
-        intent.putExtra("titulosProblemas", titulosProblemas);
-
         startActivity(intent);
-        finish();
-    }
-
-    @Override
-    public void onBackPressed() {
-        mudarTela();
     }
 }
\ No newline at end of file
